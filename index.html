<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Neuron Sandbox</title>

        <link rel="stylesheet" href="slider.css" />
        <link rel="stylesheet" href="style.css" />
        <!-- <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
        <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
        <script src="https://pixijs.download/release/pixi.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <script src="leader_line.min.js"></script>
        <script src = "truth_table.js"></script>

        <article>
            <section>
                <div id="header">
                    <h1 style="font-size: 30px">Neuron Sandbox</h1>
                </div>
            </section>
            <section>
                <b class="model-name">Model Name: </b>
            </section>
            <section>
                <b id ="fname" class="model-name">model</b></section>
        </article>

        <table class = "heading-table">
            <tr>
                <th>
                    <b hidden id="congrats-msg" class="congrats">Congratulations!</b>
                </th>
            </tr>

        </table>

        <table class = "top-table">
            <tr>
                <!--                        <th style="width: 50%;alignment: left">-->
                <!--                            <button class="custom-btn myButton" id="generateTruthTable">Generate truth table</button>-->
                <!--                        </th>-->
                <th>
                    <label>Binary</label>
                    <label class="switch">
                        <input type="checkbox" id="BinaryToggle">
                        <span class="slider round"></span>
                    </label>
                </th>
                <!--<th> <button class="custom-btn myButton" id="editButton">Edit</button></th>-->
                <th>
                    <label>Edit</label>
                    <label class="switch">
                        <input type="checkbox" id="InputToggle">
                        <span class="slider round"></span>
                    </label>
                </th>

                <th hidden id="FanfareToggleBody">
                    <label>Fanfare</label>
                    <label class="switch">
                        <input type="checkbox" id="FanfareToggle">
                        <span class="slider round"></span>
                    </label>
                </th>

                <th>
                    <div class="user-input-wrp">
                        <br/>
                        <input type="text" class="inputText" name="url" id="url" size="160" required/>
                        <span class="floating-label">Model Url Or Blank To Browse </span>
                    </div>

                    <!--                            <button for="upload-file" class="custom-btn myButton">-->
                    <!--                                <i class="fa fa-upload" aria-hidden="true"></i>-->
                    <!--                                upload file ...-->
                    <!--                            </button>-->
                    <a href="javascript:uploadFileCombined();" class="custom-btn myButton">
                        <i class="fa fa-upload" aria-hidden="true"></i> Load Model
                    </a>

                    <!--                            <input type="button"  class="custom-btn myButton" id="loadFileJson" value="Upload Model" onclick="document.getElementById('upload-file').click();"> </input>-->

                    <input id="upload-file" style="display:none;" type="file" accept="application/JSON" onchange="console.log('event = ', event); uploadFile(event)"/>
                </th>
                <th>
                    <a style = "margin-top: 19%" href="#" id="downloadFile" role="button" onclick="downloadFile();" class="custom-btn myButton"><i class="fa fa-download" aria-hidden="true"></i> Save Model</a>

                    <!--                            <button id="downloadFile" onclick="downloadFile();" class="custom-btn myButton" >-->
                    <!--                                <i class="fa fa-download" aria-hidden="true"></i>-->
                    <!--                                download file ...-->
                    <!--                            </button>-->
                </th>
                <th>
                    <label>Show Desired</label>
                    <label class="switch" >
                        <input type="checkbox" id="OutputToggle">
                        <span class="slider round"></span>
                    </label>
                </th>
            </tr>
        </table>
        <table class="bottom-table"  style="table-layout: fixed;">
            <tr>
                <th colspan="100%">
                    <div id="all-containers">
                        <div id = "input-container" class="left">

                            <!--                <div class="rows">-->
                            <!--                    <button class="custom-btn myButton" id="generateTruthTable">Generate truth table</button>-->
                            <!--                    <button class="custom-btn myButton" id="editButton">Edit</button>-->
                            <!--                </div>-->
                            <div class="rows">
                                <table id="input-table" class="table">
                                    <tr>
                                        <td> <!-- edit button container -->
                                            <div class="row-buttons-container">
                                                <button class="button" id="first-row-button" onclick="demo.insertRow(this)">+</button>
                                            </div>
                                        </td>
                                        <th id="tblinput1">
                                            <div class="input-content">x<sub>1</sub></div>
                                        </th>
                                        <th id="tblinput2">
                                            <div class="input-content">x<sub>2</sub></div>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div id="network-container" class="center">
                            <div class="center-input">
                                <table id="selected-inputs" class="selected">
                                    <tr>
                                        <td id="selinput1">
                                            <div class="input-content">x<sub>1</sub></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td id="selinput2">
                                            <div class="input-content">x<sub>2</sub></div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id = "input-links" class="center">
                                <svg id="svg">
                                    <marker id="triangle" viewBox="0 0 10 10"
                                            refX="1" refY="5"
                                            markerUnits="strokeWidth"
                                            markerWidth="10" markerHeight="10"
                                            orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" fill="black"/>
                                    </marker>
                                    <!--<line id="line" stroke="black" stroke-width="3" x1="0%" y1="30%" x2="80%" y2="40%" marker-end="url(#triangle)"/>-->
                                    <!--<line id="line" stroke="black" stroke-width="3" x1="0%" y1="70%" x2="80%" y2="60%" marker-end="url(#triangle)"/>-->
                                </svg>
                                <div id="input-link-text" class="center">
                                    <div id="weight-1" class="weight_label" >
                                        <text fill="black">w<sub>1</sub> =</text>
                                        <text contenteditable="true" id="w1" fill="black" class="weights" onkeypress="if (keyCode == 13) return false;"></text>
                                    </div>
                                    <div id="weight-2" class="weight_label">
                                        <text fill="black">w<sub>2</sub> =</text>
                                        <text contenteditable="true" id="w2" fill="black" class="weights" onkeypress="if (keyCode == 13) return false;"></text>
                                    </div>
                                </div>
                            </div>
                            <div id = "perceptron1" class="center-perceptron">
                                <div class="circle center">
                                    <div id="threshold-text" class="center">
                                        <text>âˆ‘> </text>
                                        <text id="th1"></text>
                                        <div id="threshold-div" class="weight_popup" style="display:none">
                                            <i class="close-icon fas fa-times"></i>
                                            <input type="checkbox" id="checkbox_threshold_editable"> Editable </input>
                                        </div>
                                        <i id="threshold_toggleBtn" style="display: inline-block" class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>
                            <div id = "output-links" class="center">
                            </div>
                            <div class="center-output">
                                <table class="selected" id="selected-output">
                                    <tr>
                                        <td id="seloutput" class = "output-th"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div id = "output-container" class="right">
                            <div class = "rows">
                                <table>
                                    <tr>

                                    </tr>
                                </table>
                            </div>
                            <b id="unlearnable-msg" hidden style="font-size: 20px; color: darkred">This pattern of desired outputs is not learnable.</b>
                            <div class = "rows">
                                <table id="output-table" class="output-table table" >
                                    <tr>
                                        <th contenteditable = false id="activation">Activation    </th>
                                        <th contenteditable = false id="output">Output        </th>
                                        <th contenteditable = false id="desired" > Desired Output
                                        </th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>


                </th>
            </tr>
        </table>


        <script src="neuronsandbox.js"></script>

    </head>

    <body>
        <div id="popup" class="popup">
            <b>Winner!</b>
            <button id="keep-playing-btn" onclick="toggle()">Keep Playing</button>
            <audio id="hooray_sound">
                <source src="hooray.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
        <script type="text/javascript">
        function toggle() {
            document.getElementById("popup").classList.toggle('active');
        }
    </script>
    </body>